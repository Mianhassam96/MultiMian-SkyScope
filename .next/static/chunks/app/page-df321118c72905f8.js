(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7789:function(e,t,r){Promise.resolve().then(r.bind(r,1250))},1250:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var a=r(7437),s=r(2265),n=r(3247),l=r(1994),i=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,l.W)(t))}let c=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});c.displayName="Input";var d=r(5293);let u=(0,r(535).j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:l=!1,...i}=e,c=l?d.g7:"button";return(0,a.jsx)(c,{className:o(u({variant:s,size:n,className:r})),ref:t,...i})});function m(e){let{onSearch:t}=e,[r,l]=(0,s.useState)("");return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&(t(r.trim()),l(""))},className:"flex w-full max-w-sm items-center space-x-2",children:[(0,a.jsx)(c,{type:"text",placeholder:"Enter a city name",value:r,onChange:e=>l(e.target.value),className:"flex-grow bg-white/20 text-white placeholder-white/70 border-white/30"}),(0,a.jsxs)(x,{type:"submit",variant:"secondary",size:"icon",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Search"})]})]})}x.displayName="Button";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});h.displayName="Card";let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",r),...s})});f.displayName="CardHeader";let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:o("text-2xl font-semibold leading-none tracking-tight",r),...s})});p.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:o("p-6 pt-0",r),...s})});g.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter";var v=r(6899),b=r(6927),j=r(2973),w=r(1341),y=r(5929),N=r(6215),k=r(3891);function C(e){var t,r,n,l,i,o,c,d,u,x,C,Z,R,_,D,L;let{onCityChange:A}=e,[F,I]=(0,s.useState)("London"),{weather:M,loading:W,error:z}=function(e){let[t,r]=(0,s.useState)(null),[a,n]=(0,s.useState)(!0),[l,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{n(!0),i(null);try{let t=await fetch("/api/weather?city=".concat(encodeURIComponent(e))),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to fetch weather data");r(a)}catch(e){console.error("Error fetching weather data:",e),i(e instanceof Error?e.message:"An unexpected error occurred"),r(null)}finally{n(!1)}})()},[e]),{weather:t,loading:a,error:l}}(F);return(0,a.jsxs)(h,{className:"w-full overflow-hidden bg-white/80 backdrop-blur-sm",children:[(0,a.jsxs)(f,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[(0,a.jsx)(p,{className:"text-2xl font-bold text-center mb-4",children:"Current Weather"}),(0,a.jsx)(m,{onSearch:e=>{I(e),A(e)}})]}),(0,a.jsxs)(g,{className:"p-6",children:[W&&(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),z&&(0,a.jsx)("div",{className:"text-center text-red-500 p-4 bg-red-50 rounded-lg",children:z}),M&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2",children:M.name}),(0,a.jsx)("p",{className:"text-6xl font-bold mb-2",children:(null===(t=M.main)||void 0===t?void 0:t.temp)!=null?"".concat(Math.round(M.main.temp),"\xb0C"):"N/A"}),(0,a.jsx)("p",{className:"text-xl capitalize text-gray-600",children:(null===(n=M.weather)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.description)||"No description available"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(S,{icon:(0,a.jsx)(v.Z,{className:"h-5 w-5 text-orange-500"}),label:"Feels Like",value:"".concat(Math.round(null!==(x=null===(l=M.main)||void 0===l?void 0:l.feels_like)&&void 0!==x?x:0),"\xb0C")}),(0,a.jsx)(S,{icon:(0,a.jsx)(b.Z,{className:"h-5 w-5 text-blue-500"}),label:"Humidity",value:"".concat(null!==(C=null===(i=M.main)||void 0===i?void 0:i.humidity)&&void 0!==C?C:0,"%")}),(0,a.jsx)(S,{icon:(0,a.jsx)(j.Z,{className:"h-5 w-5 text-green-500"}),label:"Wind Speed",value:"".concat(null!==(Z=null===(o=M.wind)||void 0===o?void 0:o.speed)&&void 0!==Z?Z:0," m/s")}),(0,a.jsx)(S,{icon:(0,a.jsx)(w.Z,{className:"h-5 w-5 text-gray-500"}),label:"Pressure",value:"".concat(null!==(R=null===(c=M.main)||void 0===c?void 0:c.pressure)&&void 0!==R?R:0," hPa")}),(0,a.jsx)(S,{icon:(0,a.jsx)(y.Z,{className:"h-5 w-5 text-yellow-500"}),label:"UV Index",value:null!==(_=M.uvi)&&void 0!==_?_:"N/A"}),(0,a.jsx)(S,{icon:(0,a.jsx)(N.Z,{className:"h-5 w-5 text-orange-400"}),label:"Sunrise",value:E(null!==(D=null===(d=M.sys)||void 0===d?void 0:d.sunrise)&&void 0!==D?D:0)}),(0,a.jsx)(S,{icon:(0,a.jsx)(k.Z,{className:"h-5 w-5 text-orange-600"}),label:"Sunset",value:E(null!==(L=null===(u=M.sys)||void 0===u?void 0:u.sunset)&&void 0!==L?L:0)})]})]})]})]})}function S(e){let{icon:t,label:r,value:s}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[t,(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:r}),(0,a.jsx)("p",{className:"font-semibold",children:s})]})]})}function E(e){return new Date(1e3*e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function Z(e){let{city:t}=e,[r,n]=(0,s.useState)("");return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/geocode?city=".concat(encodeURIComponent(t))),r=await e.json();r.lat&&r.lon&&n("https://www.openstreetmap.org/export/embed.html?bbox=".concat(r.lon-.1,",").concat(r.lat-.1,",").concat(r.lon+.1,",").concat(r.lat+.1,"&layer=mapnik&marker=").concat(r.lat,",").concat(r.lon))}catch(e){console.error("Error fetching map data:",e)}})()},[t]),(0,a.jsxs)(h,{className:"bg-white/80 backdrop-blur-sm",children:[(0,a.jsx)(f,{children:(0,a.jsx)(p,{className:"text-xl font-bold",children:"Weather Map"})}),(0,a.jsx)(g,{className:"p-0 aspect-video",children:r&&(0,a.jsx)("iframe",{width:"100%",height:"100%",frameBorder:"0",scrolling:"no",marginHeight:0,marginWidth:0,src:r,style:{border:"1px solid black"}})})]})}var R=r(3959),_=r(9338),D=r(2371);function L(e){let{city:t}=e,[r,n]=(0,s.useState)([]),[l,i]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/forecast?city=".concat(encodeURIComponent(t)));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();if(r.error)throw Error(r.error);if(!r.daily||!Array.isArray(r.daily))throw Error("Invalid forecast data received");n(r.daily),i(null)}catch(e){console.error("Error fetching forecast:",e),i("Failed to fetch forecast data. Please try again later.")}})()},[t]),l)?(0,a.jsxs)(h,{children:[(0,a.jsx)(f,{children:(0,a.jsx)(p,{className:"text-xl font-bold",children:"5-Day Forecast"})}),(0,a.jsx)(g,{children:(0,a.jsx)("p",{className:"text-red-500",children:l})})]}):(0,a.jsxs)(h,{className:"bg-white/80 backdrop-blur-sm",children:[(0,a.jsx)(f,{children:(0,a.jsx)(p,{className:"text-xl font-bold",children:"5-Day Forecast"})}),(0,a.jsx)(g,{className:"p-4",children:r.length>0?(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2",children:r.map(e=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"font-semibold",children:new Date(1e3*e.dt).toLocaleDateString([],{weekday:"short"})}),function(e){switch(e.toLowerCase()){case"clear":return(0,a.jsx)(y.Z,{className:"h-8 w-8 mx-auto text-yellow-400"});case"clouds":default:return(0,a.jsx)(w.Z,{className:"h-8 w-8 mx-auto text-gray-400"});case"rain":return(0,a.jsx)(R.Z,{className:"h-8 w-8 mx-auto text-blue-400"});case"snow":return(0,a.jsx)(_.Z,{className:"h-8 w-8 mx-auto text-blue-200"});case"thunderstorm":return(0,a.jsx)(D.Z,{className:"h-8 w-8 mx-auto text-yellow-600"})}}(e.weather[0].main),(0,a.jsxs)("p",{className:"text-sm",children:[Math.round(e.main.temp),"\xb0C"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.weather[0].description})]},e.dt))}):(0,a.jsx)("p",{children:"Loading forecast data..."})})]})}function A(){let[e,t]=(0,s.useState)("London");return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center mb-8 text-white shadow-text",children:"MultiMian SkyScope Weather"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(C,{onCityChange:e=>{t(e)}}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(Z,{city:e}),(0,a.jsx)(L,{city:e})]})]})]})}}},function(e){e.O(0,[507,971,117,744],function(){return e(e.s=7789)}),_N_E=e.O()}]);